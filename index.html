
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>!geek</title>
  <meta name="author" content="Deepak Narayana Rao">

  
  <meta name="description" content="Caching is an important aspect of the high performance applications. As the data volume increases, the cached data needs to be distributed across &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tech.endeepak.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="!geek" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css" />

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">!geek</a></h1>
  
    <h2>Code, learn & share</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="tech.endeepak.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://www.endeepak.com">Author</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2021/09/22/visual-simulation-of-consitent-hashing">Visual simulation of consistent hashing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2021-09-22T06:02:44+05:30'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2021</span></span> <span class='time'>6:02 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Caching is an important aspect of the high performance applications. As the data volume increases, the cached data needs to be distributed across multiple servers. We need to make sure the following objectives are met while doing so.</p>

<ul>
<li>Maximize the cache hits: This will reduce the load on primary data source and reduce the overall latency.</li>
<li>Distribute the data and traffic evenly: This ensures optimal use of servers and avoid overloading a subset of the servers.</li>
</ul>


<p>As the title of this post suggests, we will look into how <a href="https://en.wikipedia.org/wiki/Consistent_hashing">consistent hashing</a> can be used to achieve the above objectives. Before that, let&rsquo;s look at using a straight forward approach for solving the problem.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2021/09/22/visual-simulation-of-consitent-hashing">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/02/13/cloju-re-alization">Cloju-re-alization</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2019-02-13T20:22:19+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2019</span></span> <span class='time'>8:22 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a story of how learning clojure made me realize one of its selling points through subconscious thinking.</p>

<p>I had tried to learn clojure few times in the past and had dropped it because of the prefix notation for expressions and parentheses black-hole. Writing <code>(def y (+ (* m x) c)</code> felt very weird after expressing it as <code>y = m * x + c</code> during many years of education. I wasn&rsquo;t alone, many of my colleagues had similar feeling about clojure and pure functional programming languages.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2019/02/13/cloju-re-alization">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/12/22/monitoring-db-backups-using-prometheus">Monitoring DB backups using prometheus</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-12-22T14:19:02+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2017</span></span> <span class='time'>2:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ensuring correct database backups taken at regular interval is very critical for disaster recovery. Recent <a href="https://about.gitlab.com/2017/02/01/gitlab-dot-com-database-incident/">gitlab database incident</a> re-emphasizes this fact. <a href="https://about.gitlab.com/">Gitlab</a> was very transparent about this and <a href="https://gitlab.com/gitlab-com/www-gitlab-com/issues/1108">documented</a> approaches for preventing these failures</p>

<p>The preventive measures include, monitoring -</p>

<ul>
<li><em>Backup file is created in every x interval</em>: Catches backups not being uploaded due to backup script error or scheduling error</li>
<li><em>Size of latest backup file is at-least y bytes</em>: Catches erroneous backup file uploaded due to script error</li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/12/22/monitoring-db-backups-using-prometheus">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/12/22/to-cron-or-not-to-cron">To cron or not to cron</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-12-22T12:16:01+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2017</span></span> <span class='time'>12:16 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Using crontab for scheduling background jobs like database backup, purging old data is a common practice in lot of IT organizations. As these jobs are running in background, failures can get missed easily without proper monitoring. In most cases, failures occur due to an error in job script and some times due to mistakes in cron configuration</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/12/22/to-cron-or-not-to-cron">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/12/22/docker-swarm-in-production">Docker swarm in production</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-12-22T09:58:33+05:30'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2017</span></span> <span class='time'>9:58 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a experience report on using docker swarm(17.06) in production for ~3 months</p>

<h3>Context</h3>

<p>Prior to this, we were deploying services on VMs using ansible. For a new project, we wanted to explore benefits of running service as containers and decided to use docker swarm due to its simpler setup and consistency with docker engine APIs</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/12/22/docker-swarm-in-production">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/10/28/joy-of-finding-a-math-series">Joy of finding a math series</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-10-28T12:46:47+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>12:46 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was trying to come up with a question for preliminary logic round for interviewing. I decided to form a tricky math series and tried to figure out 2 math series which looks same in the beginning and diverges after a while. Something on the lines of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>series x =&gt; x1, x2, x3, x4, x5
</span><span class='line'>series y =&gt; y1, y2, y3, y4, y5
</span><span class='line'>
</span><span class='line'>where x1=y1, x2=y2, x3=y3 and x4!=y4, x5!=y5</span></code></pre></td></tr></table></div></figure>


<p>So the question could be</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Write the missing number in below series
</span><span class='line'>x1, x2, x3, ? , y5</span></code></pre></td></tr></table></div></figure>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/10/28/joy-of-finding-a-math-series">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/10/21/evolution-of-monitoring-systems">Evolution of monitoring systems</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-10-21T19:54:38+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>7:54 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Monitoring systems have evolved over time to support evolving architecture styles and deployment strategies</p>

<h2>Generation X+1: Monolithic applications, Bare metal servers</h2>

<p>This was the era where you would have single deployable unit for whole application (labeled as monolithic now). Application and the database would be deployed on a known set of bare metal servers. Vertical scaling was more favorable option for scaling</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2017/10/21/evolution-of-monitoring-systems">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/02/simple-obstacle-avoiding-robot-using-arduino">Simple obstacle avoiding robot using arduino</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-02T16:25:48+05:30'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>4:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Building obstacle avoiding robot is a simple &amp; fun way to start learning arduino and electronics. A lot of useful articles explain this, but you will be blocked if you can&rsquo;t get the same parts in your region. In this post, I&rsquo;ll explain how to build a simple and minimal robot using the parts available online in India.</p>

<p>Watch the below video to get an idea of what you could build by following this article.</p>

<div class="embed-video-container"><iframe src="//www.youtube.com/embed/zFlNvsFM9kY" allowfullscreen></iframe></div>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2016/01/02/simple-obstacle-avoiding-robot-using-arduino">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/19/soft-delete-and-unique-constraint">Soft delete and unique constraint</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-19T17:59:41+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post describes a robust solution and other alternatives for having unique constraint at DB level for a table with soft deleted rows.</p>

<h2>Problem Context</h2>

<p>The system identifies the users by their mobile number and hence mobile number must be unique across users. The users are soft deleted in the system by updating column <code>deleted = 1</code>. A new user can register in with same mobile number as previously deactivated user (since mobile numbers are recycled by telecoms). The unique check at application are susceptible to fail in case of concurrent requests, unique constraint is needed at DB to ensure integrity of data.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/10/19/soft-delete-and-unique-constraint">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/13/working-software-is-worth-thousand-assurances">Working software is worth thousand assurances</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-13T19:09:14+05:30'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:09 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the beginning of a software project, every one starts with a big list of features. If you ask the product owner, what is the minimum set of features that we can go live with? most of the times you&rsquo;ll hear a lot more than you expected.</p>

<p>It gets lot harder to talk about minimum scope when you are rewriting an existing software. We would usually want to go live with the minimum viable product(MVP) and build reset of it incrementally. If people are new to agile methodologies, these questions on reducing scope might look stupid &amp; annoying. Fortunately there are ways to get these questions answered, I&rsquo;m sharing my experience from couple of projects in past few years.</p>

<p>Lets start with a story, where we are writing a new version of the popular website.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/09/13/working-software-is-worth-thousand-assurances">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2021/09/22/visual-simulation-of-consitent-hashing">Visual simulation of consistent hashing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/02/13/cloju-re-alization">Cloju-re-alization</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/12/22/monitoring-db-backups-using-prometheus">Monitoring DB backups using prometheus</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/12/22/to-cron-or-not-to-cron">To cron or not to cron</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/12/22/docker-swarm-in-production">Docker swarm in production</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/agile' style='font-size: 106.0%'>agile(1)</a> <a href='/blog/categories/ajax' style='font-size: 106.0%'>ajax(1)</a> <a href='/blog/categories/angular-ui' style='font-size: 106.0%'>angular-ui(1)</a> <a href='/blog/categories/angularjs' style='font-size: 130.0%'>angularjs(5)</a> <a href='/blog/categories/app-objects' style='font-size: 106.0%'>app-objects(1)</a> <a href='/blog/categories/arduino' style='font-size: 106.0%'>arduino(1)</a> <a href='/blog/categories/caching' style='font-size: 106.0%'>caching(1)</a> <a href='/blog/categories/capybara' style='font-size: 106.0%'>capybara(1)</a> <a href='/blog/categories/clojure' style='font-size: 106.0%'>clojure(1)</a> <a href='/blog/categories/database' style='font-size: 106.0%'>database(1)</a> <a href='/blog/categories/debug' style='font-size: 112.0%'>debug(2)</a> <a href='/blog/categories/devops' style='font-size: 124.0%'>devops(4)</a> <a href='/blog/categories/docker' style='font-size: 106.0%'>docker(1)</a> <a href='/blog/categories/f-dot-js' style='font-size: 106.0%'>f.js(1)</a> <a href='/blog/categories/functional-programming' style='font-size: 106.0%'>functional-programming(1)</a> <a href='/blog/categories/functional-tests' style='font-size: 112.0%'>functional-tests(2)</a> <a href='/blog/categories/javascript' style='font-size: 160.0%'>javascript(10)</a> <a href='/blog/categories/jenkins' style='font-size: 106.0%'>jenkins(1)</a> <a href='/blog/categories/json' style='font-size: 106.0%'>json(1)</a> <a href='/blog/categories/maths' style='font-size: 106.0%'>maths(1)</a> <a href='/blog/categories/meta-programming' style='font-size: 106.0%'>meta-programming(1)</a> <a href='/blog/categories/micro-services' style='font-size: 106.0%'>micro-services(1)</a> <a href='/blog/categories/monitoring' style='font-size: 118.0%'>monitoring(3)</a> <a href='/blog/categories/mvp' style='font-size: 106.0%'>mvp(1)</a> <a href='/blog/categories/nagios' style='font-size: 106.0%'>nagios(1)</a> <a href='/blog/categories/octopress' style='font-size: 106.0%'>octopress(1)</a> <a href='/blog/categories/overlay' style='font-size: 106.0%'>overlay(1)</a> <a href='/blog/categories/patterns' style='font-size: 106.0%'>patterns(1)</a> <a href='/blog/categories/print' style='font-size: 112.0%'>print(2)</a> <a href='/blog/categories/prometheus' style='font-size: 112.0%'>prometheus(2)</a> <a href='/blog/categories/python' style='font-size: 112.0%'>python(2)</a> <a href='/blog/categories/refactor' style='font-size: 106.0%'>refactor(1)</a> <a href='/blog/categories/robot' style='font-size: 106.0%'>robot(1)</a> <a href='/blog/categories/ruby' style='font-size: 124.0%'>ruby(4)</a> <a href='/blog/categories/sensu' style='font-size: 106.0%'>sensu(1)</a> <a href='/blog/categories/simufast' style='font-size: 106.0%'>simufast(1)</a> <a href='/blog/categories/spa' style='font-size: 112.0%'>spa(2)</a> <a href='/blog/categories/spinner' style='font-size: 106.0%'>spinner(1)</a> <a href='/blog/categories/system-design' style='font-size: 106.0%'>system-design(1)</a> <a href='/blog/categories/tdd' style='font-size: 106.0%'>tdd(1)</a> <a href='/blog/categories/template' style='font-size: 106.0%'>template(1)</a> <a href='/blog/categories/ui-router' style='font-size: 106.0%'>ui-router(1)</a> <a href='/blog/categories/walking-skeleton' style='font-size: 106.0%'>walking-skeleton(1)</a> </span>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2021 - Deepak Narayana Rao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tech-endeepak';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









<script src="https://unpkg.com/applause-button/dist/applause-button.js"></script>


</body>
</html>
